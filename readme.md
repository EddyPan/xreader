# XReader - 一款带语音朗读和进度同步的 TXT 小说阅读器

## 项目介绍

XReader 是一款基于 Web 技术的 TXT 格式电子书阅读器。它允许用户在浏览器中打开本地的 `.txt` 文件进行阅读，并提供了一系列增强功能，旨在提升阅读体验。

核心功能包括语音朗读（TTS）、阅读进度管理、多书籍列表、内容搜索以及与远程服务器的进度同步。项目界面简洁，支持响应式设计，在桌面和移动设备上均有良好表现。

## 功能列表

- **文件阅读**: 支持打开本地 `.txt` 格式的文本文件。
- **分页浏览**: 自动将文本内容分割成段落和页面，方便浏览。
- **语音朗读**: 利用浏览器的 Web Speech API 实现文本到语音的转换，支持暂停、继续和语速调整。
- **进度管理**: 自动保存每本书的阅读进度，包括页码和段落索引，方便下次继续阅读。
- **书籍列表**: 使用 IndexedDB 在本地存储和管理多本书籍。
- **内容搜索**: 在当前打开的书籍中快速搜索关键词，并跳转到相应位置。
- **远程同步**: 
    - 支持将阅读进度同步到远程服务器。
    - 首次同步时会自动上传书籍原文。
    - 支持从云端获取最新进度，实现多设备同步。
- **响应式设计**: 适配桌面和移动端浏览器，提供一致的阅读体验。
- **快捷键支持**: 支持使用键盘快捷键进行翻页和朗读控制。

## 技术栈

- **前端**: 
    - HTML5
    - CSS3
    - Vanilla JavaScript (无框架)
    - IndexedDB (本地存储)
- **后端**: 
    - Node.js
    - Express.js
- **数据库**: 
    - SQLite (用于后端存储同步数据)

## 本地开发

请按照以下步骤在本地运行项目：

1.  **安装 Node.js**: 
    如果你的系统中没有安装 Node.js，请从 [Node.js 官网](https://nodejs.org/) 下载并安装。

2.  **安装依赖**: 
    在项目根目录下打开终端，运行以下命令来安装项目所需的依赖包：
    ```bash
    npm install
    ```

3.  **启动服务**: 
    运行以下命令来启动集成了前端和后端的 Node.js 服务：
    ```bash
    node server.js
    ```

4.  **访问应用**: 
    服务启动后，打开浏览器并访问 `http://localhost:8000` 即可开始使用。

## 服务部署

### 本地部署 (Windows)

1.  **设置环境变量:** 
    在命令提示符 (CMD) 中使用 `set` 命令设置环境变量：
    ```cmd
    set SECRET_KEY="your-super-secret-key"
    set MD5_HASH="your-pre-calculated-hash"
    ```
    或者，你也可以在 Windows 的“系统属性”对话框中永久设置环境变量。

2.  **启动服务:** 
    直接运行 `node server.js`。为了让服务在后台持续运行，推荐使用 `pm2`：
    ```bash
    # 全局安装 pm2
    npm install -g pm2

    # 使用 pm2 启动服务
    pm2 start server.js --name xreader
    ```

### Vercel 部署

你可以使用 Vercel 平台来一键部署你的应用。

1.  **安装 Vercel CLI:**
    ```bash
    npm install -g vercel
    ```

2.  **登录 Vercel:**
    ```bash
    vercel login
    ```

3.  **配置环境变量:**
    在 Vercel 的项目设置页面中，添加 `SECRET_KEY` 和 `MD5_HASH` 环境变量。

4.  **部署:**
    在项目根目录下运行 `vercel` 命令即可完成部署。
    ```bash
    vercel
    ```

## 注意事项

- 部署时，请确保服务器的防火墙或安全组规则允许对应用端口（默认为 8000）的访问。
- 建议使用进程管理工具（如 PM2）来管理 Node.js 应用，以确保其在后台持续运行并能在崩溃后自动重启。